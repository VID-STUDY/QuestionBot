(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],d=0,v=[];d<o.length;d++)r=o[d],s[r]&&v.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1ce4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=a("bb71"),i=(a("da64"),a("c0a4")),r=a.n(i),o=a("3ccf");n["a"].use(s["a"],{iconfont:"md",theme:{primary:"#1E9AC2",secondary:"#424242",accent:r.a.red.darken1,info:"#2196f3",success:"#4caf50",warning:"#ffc107"},directives:{Ripple:o["a"]}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{clipped:t.drawer.clipped,fixed:t.drawer.fixed,width:"260",app:""},model:{value:t.drawer.open,callback:function(e){t.$set(t.drawer,"open",e)},expression:"drawer.open"}},[a("v-toolbar",{attrs:{color:"primary darken-1 hidden-md-and-up",dark:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3 "},[a("span",[a("v-icon",{attrs:{left:""}},[t._v("contact_support")]),t._v(" QuestionBot")],1)])],1),a("vue-perfect-scrollbar",{staticClass:"drawer-menu&#45;&#45;scroll",attrs:{settings:t.scrollSettings}},[a("v-list",{attrs:{dense:"",expand:"",subheader:""}},[a("v-subheader",[t._v("Каналы")]),t._l(t.channels,function(e){return a("v-list-group",{key:e.id,scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("chat_bubble_outline")])],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"font-weight-bold"},[t._v(t._s(e.channelTitle))])],1)],1)]},proxy:!0}],null,!0)},[a("v-list-tile",{attrs:{to:{name:"channelUsers",params:{name:e.channelName}}}},[a("v-list-tile-action",[a("v-icon",[t._v("people_outline")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Пользователи")])],1)],1),a("v-list-tile",{attrs:{to:{name:"channelQuizzes",params:{name:e.channelName}}}},[a("v-list-tile-action",[a("v-icon",[t._v("assignment")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Тесты/опросы")])],1)],1),a("v-list-tile",{attrs:{to:{name:"channelRating",params:{name:e.channelName}}}},[a("v-list-tile-action",[a("v-icon",[t._v("assessment")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Рейтинг")])],1)],1)],1)}),a("v-divider"),a("v-list-tile",{attrs:{to:{name:"newChannel"}}},[a("v-list-tile-action",[a("v-icon",[t._v("add")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Добавить канал")])],1)],1),a("v-list-tile",{attrs:{to:{name:"settings"}}},[a("v-list-tile-action",[a("v-icon",[t._v("settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Настройки")])],1)],1),a("v-list-tile",{staticClass:"hidden-md-and-up"},[a("v-list-tile-action",[a("v-icon",[t._v("exit_to_app")])],1),a("v-list-tile-content",[a("v-list-tile-title",[a("a",{staticClass:"text-gray",staticStyle:{"text-decoration":"none"},attrs:{href:"/auth/logout"}},[t._v("Выйти")])])],1)],1)],2)],1)],1),a("v-toolbar",{attrs:{app:"",dark:"",color:"primary",fixed:t.toolbar.fixed,"clipped-left":t.toolbar.clippedLeft}},[a("v-toolbar-side-icon",{on:{click:function(e){return e.stopPropagation(),t.toggleDrawer(e)}}}),a("v-toolbar-title",[t._v("Question Bot Administration")]),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-md-and-down"},[a("div",{staticClass:"user-email d-flex align-center justify-center font-weight-bold"},[a("v-icon",[t._v("account_circle")]),a("p",{staticClass:"ml-2"},[t._v("dmitriyl1899@gmail.com")])],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("a",{staticClass:"v-btn v-btn--icon theme--dark",attrs:{href:"/auth/logout"},on:{mouseenter:n}},[a("div",{staticClass:"v-btn__content"},[a("i",{staticClass:"v-icon material-icons theme--dark",attrs:{"aria-hidden":"true"}},[t._v("exit_to_app")])])])]}}])},[a("span",[t._v("Выйти")])])],1)],1),a("v-content",[a("router-view")],1)],1)},c=[],u=(a("ac6a"),a("9d63")),d=a.n(u),v={channels:"https://dmitriyl99.pythonanywhere.com/api/channels",channelQuizzes:"https://dmitriyl99.pythonanywhere.com/api/channels/channelName/quizzes",channelUsers:"https://dmitriyl99.pythonanywhere.com/api/channels/channelName/users",channelUser:"https://dmitriyl99.pythonanywhere.com/api/channels/channelName/users/userId",channelRatings:"https://dmitriyl99.pythonanywhere.com/api/channels/channelName/rating",quizzes:"https://dmitriyl99.pythonanywhere.com/api/quizzes/quizId",tests:"https://dmitriyl99.pythonanywhere.com/api/tests",test:"https://dmitriyl99.pythonanywhere.com/api/tests/testId",testsFiles:"https://dmitriyl99.pythonanywhere.com/api/tests/testId/file",settings:"https://dmitriyl99.pythonanywhere.com/api/settings"},p=a("bc3a"),f=a.n(p),h={name:"App",components:{VuePerfectScrollbar:d.a},data:function(){return{drawer:{open:!1,clipped:!0,fixed:!0},toolbar:{fixed:!0,clippedLeft:!0},scrollSettings:{maxScrollbarLength:160},channels:[]}},computed:{computeLogo:function(){return"/static/logo.png"}},methods:{getAllChannels:function(){var t=this;f.a.get(v.channels).then(function(e){var a=e.data;a.forEach(function(e){t.channels.push(e)})})},toggleDrawer:function(){this.drawer.permanent?(this.drawer.permanent=!this.drawer.permanent,this.drawer.clipped=!0,this.toolbar.clippedLeft=!0):this.drawer.open=!this.drawer.open}},created:function(){var t=this;this.getAllChannels(),this.$root.$on("newChannelAdded",function(e){t.channels.push(e)})}},m=h,b=(a("5c0b"),a("2877")),g=a("6544"),D=a.n(g),_=a("7496"),x=a("549c"),w=a("ce7e"),k=a("132d"),V=a("8860"),y=a("56b0"),T=a("ba95"),C=a("40fe"),z=a("5d23"),$=a("f774"),S=a("9910"),F=a("e0c7"),L=a("71d9"),q=a("2a7f"),E=a("706c"),M=a("3a2f"),I=Object(b["a"])(m,l,c,!1,null,null,null),A=I.exports;D()(I,{VApp:_["a"],VContent:x["a"],VDivider:w["a"],VIcon:k["a"],VList:V["a"],VListGroup:y["a"],VListTile:T["a"],VListTileAction:C["a"],VListTileContent:z["a"],VListTileTitle:z["c"],VNavigationDrawer:$["a"],VSpacer:S["a"],VSubheader:F["a"],VToolbar:L["a"],VToolbarItems:q["a"],VToolbarSideIcon:E["a"],VToolbarTitle:q["b"],VTooltip:M["a"]});var N=a("8c4f"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:"","justify-center":""}},[a("section",{staticClass:"mt-4"},[a("h1",{staticClass:"text-xs-center"},[t._v("Добро пожаловать в административную панель Telegram бота QuestionBot!")]),a("div",{staticClass:"mt-3"},[a("p",{staticClass:"subheading text-xs-center"},[t._v("Данная система позволяет управлять каналами, создавать тесты и опросы, которые публикуются только в то время, которое выберите вы, мониторить пользователей и рейтинги")])]),a("v-divider",{staticClass:"my-3"}),a("div",{staticClass:"title mb-3 text-xs-center"},[t._v("Для начала работы откройте меню слева в верхнем углу.")])],1)])],1)},Q=[],j={name:"Home",title:"QuestionBot Administration"},P=j,R=a("a523"),U=a("a722"),B=Object(b["a"])(P,O,Q,!1,null,null,null),H=B.exports;D()(B,{VContainer:R["a"],VDivider:w["a"],VLayout:U["a"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{wrap:"",row:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"headline ml-3"},[t._v("Канал "+t._s(t.name))])])],1),a("router-view")],1)},J=[],K={name:"Channel",props:["name"]},W=K,X=a("0e8f"),Y=Object(b["a"])(W,G,J,!1,null,null,null),Z=Y.exports;D()(Y,{VContainer:R["a"],VFlex:X["a"],VLayout:U["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[t._v("Добавить новый канал")]),a("span",{staticClass:"grey--text"},[t._v("Перед заполнением поля, сделайте канал публичным, задайте ему ссылку, добавьте туда бота и сделайте его администратором.")])]),a("v-card-text",[a("v-text-field",{attrs:{"error-messages":t.newChannel.errorMessages,"prepend-icon":"link",rules:t.rules,label:"Ссылка на канал или юзернэйм"},model:{value:t.newChannel.url,callback:function(e){t.$set(t.newChannel,"url",e)},expression:"newChannel.url"}})],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"","сolor":"primary",disabled:t.loading,loading:t.loading},on:{click:t.save},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                            Добавить\n                        ")],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:"",color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.snackbarText)+"\n        "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("Закрыть")],1)],1)],1)},et=[],at={name:"AddChannel",title:"Добавить канал",data:function(){return{newChannel:{url:"",hasError:!1,errorMessages:[]},valid:!0,snackbar:!1,snackbarText:"",snackbarColor:"info",loading:!1}},computed:{rules:function(){var t=[],e=function(t){var e=/https?:\/\/(t(elegram)?\.me|telegram\.org)\/([a-z0-9\_]){5,32}/gi,a=/@[a-z0-9\_]/gi;return e.test(t)||a.test(t)||"Введите Telegram-ссылку на ваш канал"};return t.push(e),t}},methods:{save:function(){var t=this;this.$refs.form.validate()&&(this.loading=!0,f.a.post(v.channels,{channelName:this.newChannel.url}).then(function(e){var a=e.data;if(a.errors){var n="";error.errors.forEach(function(t){n+=t+"\n"}),t.snackbarText=n,t.snackbarColor="error",t.snackbar=!0}t.$root.$emit("newChannelAdded",a),t.newChannel.url="",t.snackbarText="Добавлен канал ".concat(a.channelTitle),t.snackbarColor="success",t.snackbar=!0}).catch(function(e){if(e.response){var a="";e.response.data.errors.forEach(function(t){a+=t+"\n"}),t.snackbarText=a,t.snackbarColor="error",t.snackbar=!0}}).finally(function(){t.loading=!1}))}}},nt=at,st=a("8336"),it=a("b0af"),rt=a("99d9"),ot=a("12b2"),lt=a("4bd4"),ct=a("2db4"),ut=a("2677"),dt=Object(b["a"])(nt,tt,et,!1,null,"af30f9d6",null),vt=dt.exports;D()(dt,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:ot["a"],VContainer:R["a"],VFlex:X["a"],VForm:lt["a"],VIcon:k["a"],VLayout:U["a"],VSnackbar:ct["a"],VTextField:ut["a"]});var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-text",[a("v-list",{attrs:{"two-line":"",subheader:""}},[a("v-subheader",[t._v("Пользователи, которые принимают участие в опросах")]),t._l(t.users,function(e){return a("v-list-tile",{key:e.id,attrs:{ripple:"",to:{name:"channelUser",params:{name:t.name,userId:e.id}}}},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.firstName)+" "),e.lastName&&""!==e.lastName?a("span",[t._v(t._s(e.lastName))]):t._e()]),a("v-list-tile-sub-title",[e.username&&""!==e.username?a("span",[t._v(t._s(e.username))]):a("span",[t._v("Unknown username")])])],1)],1)})],2)],1)],1)],1)],1)],1)},ft=[],ht=(a("a481"),a("7f7f"),{title:function(){return"Участники - ".concat(this.name)},name:"ChannelMembers",props:["name"],data:function(){return{users:[]}},methods:{getUsers:function(){var t=this,e=v.channelUsers.replace("channelName",this.name);f.a.get(e).then(function(e){var a=e.data;t.users=[],a.forEach(function(e){t.users.push(e)})}).catch(function(t){})}},watch:{$route:function(){this.getUsers()}},mounted:function(){this.getUsers()}}),mt=ht,bt=Object(b["a"])(mt,pt,ft,!1,null,null,null),gt=bt.exports;D()(bt,{VCard:it["a"],VCardText:rt["b"],VContainer:R["a"],VFlex:X["a"],VLayout:U["a"],VList:V["a"],VListTile:T["a"],VListTileContent:z["a"],VListTileSubTitle:z["b"],VListTileTitle:z["c"],VSubheader:F["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",[t.error?a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"font-weight text-xs-center display-1"},[t._v(t._s(t.errorMessage))]),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.getUser}},[a("v-icon",{attrs:{left:""}},[t._v("cached")]),t._v("\n        Обновить\n      ")],1)],1)],1):a("v-flex",[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(t.user.firstName)+" "),t.user.lastName&&""!==t.user.lastName?a("span",[t._v(t._s(t.user.lastName))]):t._e(),a("v-subheader",[t.user.username&&""!==t.user.username?a("span",[t._v(t._s(t.user.username))]):a("span",[t._v("Unknown username")])])],1),a("v-divider"),a("v-card-text",[a("v-subheader",[t._v("Сортировать по дате")]),a("v-layout",{attrs:{"align-content-space-between":""}},[a("v-menu",{ref:"startMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"От","prepend-icon":"event",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},n))]}}]),model:{value:t.startMenu,callback:function(e){t.startMenu=e},expression:"startMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","first-day-of-week":"1"},on:{input:function(e){t.startMenu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("v-menu",{ref:"endMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"До","prepend-icon":"event",readonly:""},on:{blur:function(e){t.endDate=t.parseDate(t.endDateFormatted)}},model:{value:t.endDateFormatted,callback:function(e){t.endDateFormatted=e},expression:"endDateFormatted"}},n))]}}]),model:{value:t.endMenu,callback:function(e){t.endMenu=e},expression:"endMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","first-day-of-week":"1"},on:{input:function(e){t.endMenu=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("v-divider"),a("v-list",{attrs:{subheader:"","two-line":""}},[a("v-subheader",[t._v("Очки, заработанные пользователем. Всего "+t._s(this.pointsSum))]),t._l(t.answersToShow,function(e){return a("v-list-tile",{key:e.id},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Очки: "+t._s(e.points))]),a("v-list-tile-sub-title",[t._v("Дата: "+t._s(e.createdAt))])],1)],1)})],2)],1)],1)],1)],1)},_t=[],xt=(a("f576"),a("28a5"),a("768b")),wt={name:"User",title:function(){return"Участник ".concat(userId)},props:["name","userId"],data:function(){return{user:{},error:!1,errorMessage:"",answersToShow:[],pointsSum:0,startMenu:!1,startDate:"",startDateFormatted:"",endMenu:!1,endDate:"",endDateFormatted:""}},watch:{startDate:function(t){this.startDateFormatted=this.formatDate(this.startDate),this.sortAnswers()},endDate:function(t){this.endDateFormatted=this.formatDate(this.endDate),this.sortAnswers()},$route:function(){this.getUser()}},methods:{sortAnswers:function(){var t=this;this.answersToShow=[],this.answersToShow=this.user.answers.filter(function(e){var a=new Date(t.parseDate(e.createdAt));if(""!==t.startDate&&""!==t.endDate){console.log("both Date");var n=new Date(t.startDate),s=new Date(t.endDate);return a>=n&&a<=s}if(""!==t.startDate){console.log("start Date");var i=new Date(t.startDate);return a>=i}if(""!==t.endDate){console.log("end Date");var r=new Date(t.endDate);return a<=r}return!0}),this.countPointsSum()},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,".").concat(s,".").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("."),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,"-").concat(s.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},countPointsSum:function(){var t=0;this.answersToShow.forEach(function(e){t+=e.points}),this.pointsSum=t},getUser:function(){var t=this,e=v.channelUser.replace("channelName",this.name).replace("userId",this.userId);f.a.get(e).then(function(e){var a=e.data;t.error=!1,t.user=a,t.answersToShow=a.answers,t.countPointsSum()}).catch(function(e){if(t.error=!0,e.response){var a="";e.response.data.errors.forEach(function(t){a+=t}),t.errorMessage=a}else console.error(e),t.errorMessage="Что-то пошло не так..."})}},created:function(){this.getUser()}},kt=wt,Vt=a("2e4b"),yt=a("e449"),Tt=Object(b["a"])(kt,Dt,_t,!1,null,"7eb1bfd0",null),Ct=Tt.exports;D()(Tt,{VBtn:st["a"],VCard:it["a"],VCardText:rt["b"],VCardTitle:ot["a"],VDatePicker:Vt["a"],VDivider:w["a"],VFlex:X["a"],VIcon:k["a"],VLayout:U["a"],VList:V["a"],VListTile:T["a"],VListTileContent:z["a"],VListTileSubTitle:z["b"],VListTileTitle:z["c"],VMenu:yt["a"],VSubheader:F["a"],VTextField:ut["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",[t.error?[a("v-flex",{attrs:{xs12:""}},[a("p",{staticClass:"font-weight text-xs-center display-1"},[t._v(t._s(t.errorMessage))]),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.getQuizzes},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}],null,!1,344498462)},[a("v-icon",{attrs:{left:""}},[t._v("cached")]),t._v("\n                Обновить\n              ")],1)],1)],1)]:[a("v-flex",{attrs:{xs12:""}},[a("v-subheader",[t._v("Рейтинги канала")]),t._l(t.quizzes,function(e){return a("v-card",{key:e.id,staticClass:"mt-2"},[a("v-card-title",{staticClass:"font-weight-bold"},[t._v("\n                    Викторина\n                    "),a("v-subheader",[t._v(t._s(e.startDate)+" - "+t._s(e.endDate))])],1),a("v-divider"),a("v-card-text",[a("v-list",{attrs:{"two-line":"",subheader:""}},[a("v-subheader",[t._v("Рейтинг тестов по количеству ответов")]),t._l(e.tests,function(e){return a("v-list-tile",{key:e.id},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.question))]),a("v-list-tile-sub-title",[t._v("Дата публикации: "+t._s(e.publishDate))]),a("v-list-tile-sub-title",[t._v("Количество ответов: "+t._s(e.answersCount))])],1)],1)})],2)],1)],1)})],2)]],2)},$t=[],St={name:"ChannelRating",props:["name"],title:function(){return"Рейтинги - ".concat(this.name)},data:function(){return{quizzes:[],error:!1,errorMessage:"",loading:!1}},methods:{getQuizzes:function(){var t=this,e=v.channelRatings.replace("channelName",this.name);this.loading=!0,f.a.get(e).then(function(e){var a=e.data;t.error=!1,t.quizzes=[],a.forEach(function(e){t.quizzes.push(e)})}).catch(function(e){if(t.error=!0,e.response){var a="";e.response.data.errors.forEach(function(t){a+=t}),t.errorMessage=a}else t.errorMessage="Что-то пошло не так..."}).finally(function(){t.loading=!1})}},watch:{$route:function(){this.getQuizzes()}},created:function(){this.getQuizzes()}},Ft=St,Lt=Object(b["a"])(Ft,zt,$t,!1,null,null,null),qt=Lt.exports;D()(Lt,{VBtn:st["a"],VCard:it["a"],VCardText:rt["b"],VCardTitle:ot["a"],VDivider:w["a"],VFlex:X["a"],VIcon:k["a"],VLayout:U["a"],VList:V["a"],VListTile:T["a"],VListTileContent:z["a"],VListTileSubTitle:z["b"],VListTileTitle:z["c"],VSubheader:F["a"]});var Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"",dense:"",cad:""}},[a("v-toolbar-title",{staticClass:"subheading"},[t._v("Создать викторину")]),a("v-spacer")],1),a("v-divider"),a("v-card-text",{},[a("v-form",{ref:"form",model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"startMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.startDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.startDate=e},"update:return-value":function(e){t.startDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"Дата начала",rules:t.startDateRules,"prepend-icon":"event",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},n))]}}]),model:{value:t.startMenu,callback:function(e){t.startMenu=e},expression:"startMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","allowed-dates":t.allowedStartDates,"first-day-of-week":"1"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.startMenu=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.startMenu.save(t.startDate)}}},[t._v("Ок")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"endMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.endDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.endDate=e},"update:return-value":function(e){t.endDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"Дата окончания","prepend-icon":"event",readonly:"",rules:t.endDateRules},on:{blur:function(e){t.endDate=t.parseDate(t.endDateFormatted)}},model:{value:t.endDateFormatted,callback:function(e){t.endDateFormatted=e},expression:"endDateFormatted"}},n))]}}]),model:{value:t.endMenu,callback:function(e){t.endMenu=e},expression:"endMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","allowed-dates":t.allowedEndDates,"first-day-of-week":"1"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.endMenu=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.endMenu.save(t.endDate)}}},[t._v("Ок")])],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:t.topCountRules,label:"Количество топ игроков","prepend-icon":"filter_1"},model:{value:t.topCount,callback:function(e){t.topCount=e},expression:"topCount"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.goBack}},[a("v-icon",{attrs:{left:""}},[t._v("arrow_back")]),t._v("Назад\n        ")],1),a("v-btn",{attrs:{color:"primary",flat:"",disabled:t.isLoading,loading:t.isLoading},on:{click:t.save},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("Сохранить\n        ")],1)],1)],1)],1),a("v-snackbar",{attrs:{bottom:"",color:"error"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackbarText)+"\n    "),a("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("Закрыть\n    ")],1)],1)],1)},Mt=[],It={name:"NewQuiz",props:["name"],title:function(){return"Добавить викторину - ".concat(this.name)},data:function(){return{isValid:!0,startMenu:!1,endMenu:!1,startDate:"",endDate:"",startDateFormatted:"",endDateFormatted:"",topCount:10,isLoading:!1,snackbar:!1,snackbarText:""}},computed:{computedStartDateFormatted:function(){return this.formatDate(this.startDate)},computedEndDateFormatted:function(){return this.formatDate(this.endDate)},startDateRules:function(){var t=this,e=[],a=function(t){return""!==t||"Укажите дату начала викторины"},n=function(e){if(""!==t.endDate&&""!==e){var a=new Date(t.parseDate(e)),n=new Date(t.endDate);return a<n||"Дата начала должна быть раньше, чем дата конца"}return!0};return e.push(a),e.push(n),e},endDateRules:function(){var t=this,e=[],a=function(t){return""!==t||"Укажите дату окончания викторины"},n=function(e){if(""!==t.startDate&&""!==e){var a=new Date(t.parseDate(e)),n=new Date(t.startDate);return a>n||"Дата окончания должна быть позже, чем дата начала"}return!0};return e.push(a),e.push(n),e},topCountRules:function(){var t=[],e=function(t){return""!==t||"Укажите количество топ игроков"},a=function(t){return!isNaN(t)||"Количество топ игроков должно быть числом"},n=function(t){if(""!==t&&!isNaN(t))return+t>=0||"Количество топ игроков должно быть больше или равным нулю"};return t.push(e),t.push(a),t.push(n),t}},watch:{startDate:function(t){this.startDateFormatted=this.formatDate(this.startDate)},endDate:function(t){this.endDateFormatted=this.formatDate(this.endDate)}},methods:{goBack:function(){this.$router.push({name:"channelQuizzes",params:{name:this.name}})},save:function(){var t=this;if(this.$refs.form.validate()){this.isLoading=!0;var e=v.channelQuizzes.replace("channelName",this.name),a={startDate:this.startDateFormatted,endDate:this.endDateFormatted,topCount:this.topCount};f.a.post(e,a).then(function(e){e.data;t.goBack()}).catch(function(e){if(e.response){var a="";e.response.data.errors.forEach(function(t){a+=t+"\n"}),t.snackbarText=a,t.snackbar=!0}}).finally(function(){t.isLoading=!1})}},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,".").concat(s,".").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("."),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,"-").concat(s.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},allowedStartDates:function(t){var e=new Date(t),a=new Date;return e>a},allowedEndDates:function(t){var e=new Date(t),a=new Date;return e>a}}},At=It,Nt=(a("6fbf"),Object(b["a"])(At,Et,Mt,!1,null,null,null)),Ot=Nt.exports;D()(Nt,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VContainer:R["a"],VDatePicker:Vt["a"],VDivider:w["a"],VFlex:X["a"],VForm:lt["a"],VIcon:k["a"],VLayout:U["a"],VMenu:yt["a"],VSnackbar:ct["a"],VSpacer:S["a"],VTextField:ut["a"],VToolbar:L["a"],VToolbarTitle:q["b"]});var Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.testDialog,callback:function(e){t.testDialog=e},expression:"testDialog"}},[a("NewEditTest",{ref:"newEditTests",on:{cancel:function(e){t.testDialog=!1},created:t.testCreatedHandler,updated:t.testUpdatedHandler,error:t.testErrorHandler}})],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("DeleteTest",{ref:"deleteTest",on:{cancel:function(e){t.deleteDialog=!1},deleted:t.testDeletedHandler,error:t.testErrorHandler}})],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.deleteQuizDialog,callback:function(e){t.deleteQuizDialog=e},expression:"deleteQuizDialog"}},[a("DeleteQuiz",{ref:"deleteQuiz",on:{cancel:function(e){t.deleteQuizDialog=!1},deleted:t.quizDeletedHandler,error:t.testErrorHandler}})],1),a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),t.hasError?[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{"xs-12":""}},[a("div",{staticClass:"d-flex justify-center align-center"},[a("p",{staticClass:"text-xs-center font-weight-bold"},[t._v(t._s(t.errorMessage))])])])],1)]:[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{"xs-12":""}},t._l(t.quizzes,function(e){return a("Quiz",{key:e.id,attrs:{quiz:e,name:t.name},on:{openNewTestDialog:t.openNewTestDialog,openDeleteTestDialog:t.openDeleteTestDialog,openEditTestDialog:t.openEditTestDialog,openDeleteQuizDialog:t.openDeleteQuizDialog}})}),1)],1),a("v-fab-transition",[a("v-btn",{attrs:{color:"primary",dark:"",fab:"",fixed:"",right:"",bottom:"",to:{name:"newQuiz",params:{name:t.name}}}},[a("v-icon",[t._v("add")])],1)],1)],a("v-snackbar",{attrs:{bottom:"",color:t.snackColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.snackText)+"\n    "),a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(e){t.snackbar=!1}}},[a("v-icon",[t._v("close")])],1)],1)],2)},jt=[],Pt=(a("20d6"),a("7514"),a("9062")),Rt=a.n(Pt),Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"quiz-section mb-1"},[a("h4",[t._v(t._s(t.quiz.startDate)+" - "+t._s(t.quiz.endDate))]),a("div",[a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{small:"",icon:"",flat:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.$emit("openNewTestDialog",t.quiz)}}},n),[a("v-icon",[t._v("add")])],1)]}}])},[a("span",[t._v("Добавить тест")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{small:"",flat:"",color:"red",icon:""},on:{click:function(e){return e.stopPropagation(),t.$emit("openDeleteQuizDialog",t.quiz)}}},n),[a("v-icon",[t._v("delete")])],1)]}}])},[a("span",[t._v("Удалить викторину")])])],1),a("v-item-group",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},t._l(t.quiz.tests,function(e){return a("Test",{key:e.id,attrs:{test:e},on:{openDeleteTestDialog:t.openDeleteTestDialogHandler,openEditTestDialog:t.openEditTestDialogHandler}})}),1)],1)],1),a("v-divider")],1)},Bt=[],Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-item",[a("div",{staticClass:"test-item"},[a("v-card",[a("v-card-title",[a("p",{staticClass:"question mb-0"},[t._v(t._s(t.test.question))])]),a("v-divider"),a("v-card-text",[a("p",[a("span",{staticClass:"font-weight-bold"},[t._v("Дата пубикации: ")]),t._v(t._s(t.test.publishDate)+" "),t.test.published?a("span",[a("v-icon",{attrs:{right:"",color:"success"}},[t._v("check")])],1):t._e()]),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[t._v("Варианты ответов")]),t._l(t.test.options,function(e){return a("v-list-tile",{key:e.id,staticClass:"option-item",attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-checkbox",{attrs:{color:"primary",disabled:!0},model:{value:e.isAnswer,callback:function(a){t.$set(e,"isAnswer",a)},expression:"option.isAnswer"}})],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"option-item-title"},[t._v("\n                                    "+t._s(e.value)+"\n                                ")])],1)],1)})],2),a("p",{staticClass:"mt-3"},[a("span",{staticClass:"font-weight-bold"},[t._v("Всего ответов: ")]),t._v(t._s(t.test.answersCount))]),t.test.file&&""!==t.test.file?a("p",[a("span",{staticClass:"font-weight-bold"},[t._v("Файл: ")]),t._v("\n                        "+t._s(t.test.file)+"\n                    ")]):t._e()],1),a("v-card-actions",[a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{flat:"",color:"primary",icon:""},on:{click:function(e){return e.stopPropagation(),t.$emit("openEditTestDialog",t.test)}}},n),[a("v-icon",{attrs:{medium:""}},[t._v("edit")])],1)]}}])},[a("span",[t._v("Редактировать")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{flat:"",color:"red",icon:""},on:{click:function(e){return e.stopPropagation(),t.$emit("openDeleteTestDialog",t.test)}}},n),[a("v-icon",{attrs:{medium:""}},[t._v("delete")])],1)]}}])},[a("span",[t._v("Удалить")])])],1)],1)],1)])],1)},Gt=[],Jt={name:"Test",props:["test"]},Kt=Jt,Wt=(a("e576"),a("ac7c")),Xt=a("d903"),Yt=a("c954"),Zt=Object(b["a"])(Kt,Ht,Gt,!1,null,"09909ea3",null),te=Zt.exports;D()(Zt,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:ot["a"],VCheckbox:Wt["a"],VDivider:w["a"],VFlex:X["a"],VIcon:k["a"],VItem:Xt["a"],VList:V["a"],VListTile:T["a"],VListTileAvatar:Yt["a"],VListTileContent:z["a"],VListTileTitle:z["c"],VSpacer:S["a"],VSubheader:F["a"],VTooltip:M["a"]});var ee={name:"Quiz",props:["quiz","name"],components:{Test:te},methods:{openDeleteTestDialogHandler:function(t){this.$emit("openDeleteTestDialog",t)},openEditTestDialogHandler:function(t){this.$emit("openEditTestDialog",t,this.quiz)}}},ae=ee,ne=a("604c"),se=Object(b["a"])(ae,Ut,Bt,!1,null,null,null),ie=se.exports;D()(se,{VBtn:st["a"],VContainer:R["a"],VDivider:w["a"],VIcon:k["a"],VItemGroup:ne["a"],VLayout:U["a"],VSpacer:S["a"],VTooltip:M["a"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Создать тест")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"testForm"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Вопрос","prepend-icon":"help",rules:t.questionRules,required:""},model:{value:t.test.question,callback:function(e){t.$set(t.test,"question",e)},expression:"test.question"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"dateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.test.publishDateNF,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.test,"publishDateNF",e)},"update:return-value":function(e){return t.$set(t.test,"publishDateNF",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"День публикации","prepend-icon":"event",rules:t.publishDateRules,readonly:""},on:{blur:function(e){t.test.publishDateNF=t.parseDate(t.test.publishDate)}},model:{value:t.test.publishDate,callback:function(e){t.$set(t.test,"publishDate",e)},expression:"test.publishDate"}},n))]}}]),model:{value:t.publishDateMenu,callback:function(e){t.publishDateMenu=e},expression:"publishDateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","first-day-of-week":"1"},model:{value:t.test.publishDateNF,callback:function(e){t.$set(t.test,"publishDateNF",e)},expression:"test.publishDateNF"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.publishDateMenu=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.dateMenu.save(t.test.publishDateNF)}}},[t._v("Ок")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-menu",{ref:"timeMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.test.publishTime,lazy:"",transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.test,"publishTime",e)},"update:return-value":function(e){return t.$set(t.test,"publishTime",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:"Время публикации","prepend-icon":"access_time",rules:t.publishTimeRules,readonly:""},model:{value:t.test.publishTime,callback:function(e){t.$set(t.test,"publishTime",e)},expression:"test.publishTime"}},n))]}}]),model:{value:t.publishTimeMenu,callback:function(e){t.publishTimeMenu=e},expression:"publishTimeMenu"}},[t.publishTimeMenu?a("v-time-picker",{attrs:{"full-width":"",format:"24hr"},model:{value:t.test.publishTime,callback:function(e){t.$set(t.test,"publishTime",e)},expression:"test.publishTime"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.publishTimeMenu=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.timeMenu.save(t.test.publishTime)}}},[t._v("Ок")])],1):t._e()],1)],1),a("v-flex",{attrs:{xs12:""}},[a("upload-btn",{ref:"fileField",attrs:{title:"Файл"},on:{"file-update":t.fileUpdateHandler}},[a("template",{slot:"icon"},[a("v-icon",[t._v("attach_file")])],1)],2),t.test.file&&""!==t.test.file?a("small",{staticClass:"grey--text"},[t._v("\n              Что бы изменить файл, загрузите новый, иначе оставьте это поле пустым\n            ")]):t._e()],1)],1)],1)],1),a("v-divider"),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[t._v("Варианты ответов")]),t._l(t.test.options,function(e){return a("test-option",{key:e.id,attrs:{option:e},on:{delete:t.removeOption,answerChange:t.changeAnswer}})})],2),a("h3",{staticClass:"headline mb-0"},[t._v("Добавить вариант ответа")]),a("v-form",{ref:"newOptionForm"},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{rules:t.newOptionRules,label:"Содержание варианта"},model:{value:t.newOption.value,callback:function(e){t.$set(t.newOption,"value",e)},expression:"newOption.value"}})],1),a("v-flex",{attrs:{sm12:""}},[a("v-btn",{attrs:{flat:"",color:"accent"},on:{click:t.addOption}},[a("v-icon",[t._v("add")]),t._v("Добавить\n          ")],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary",disabled:t.isLoading,loading:t.isLoading},on:{click:t.save},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[t._v("\n      Сохранить")])],1)],1)},oe=[],le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-checkbox",{attrs:{color:"primary"},on:{change:t.checkboxChange},model:{value:t.option.isAnswer,callback:function(e){t.$set(t.option,"isAnswer",e)},expression:"option.isAnswer"}})],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t.option.value))])],1),a("v-list-tile-action",[a("v-tooltip",{scopedSlots:t._u([{key:"activator",fn:function(e){return[a("v-btn",t._g({attrs:{flat:"",icon:"",color:"red"},on:{click:t.deleteClick}},e),[a("v-icon",[t._v("delete")])],1)]}}])},[a("span",[t._v("Удалить")])])],1)],1)},ce=[],ue={name:"TestOption",props:["option"],methods:{deleteClick:function(){this.$emit("delete",this.option.id)},checkboxChange:function(){this.$emit("answerChange",this.option.id,this.option.isAnswer)}}},de=ue,ve=Object(b["a"])(de,le,ce,!1,null,"36ef4df0",null),pe=ve.exports;D()(ve,{VBtn:st["a"],VCheckbox:Wt["a"],VIcon:k["a"],VListTile:T["a"],VListTileAction:C["a"],VListTileAvatar:Yt["a"],VListTileContent:z["a"],VListTileTitle:z["c"],VTooltip:M["a"]});var fe=a("82e0"),he=a.n(fe),me={name:"NewEditTest",components:{TestOption:pe,"upload-btn":he.a},data:function(){return{test:{id:0,question:"",publishDateNF:"",publishTime:"",filePath:"",quizId:0,options:[],clear:function(){this.question="",this.publishDate="",this.filePath="",this.quizId=0,this.options=[]}},newOption:{value:""},lastId:0,publishDateMenu:!1,publishTimeMenu:!1,isEditable:!1,isLoading:!1,startDate:null,endDate:null}},computed:{questionRules:function(){var t=[],e=function(t){return""!==t||"Вы не указали вопрос"};return t.push(e),t},publishDateRules:function(){var t=this,e=[],a=function(t){return""!==t||"Вы не указали дату публикации"},n=function(e){var a=new Date(t.parseDate(e));return a>=t.startDate&&a<=t.endDate||"Указанная дата не попадает в период викторины"};return e.push(a),e.push(n),e},publishTimeRules:function(){var t=[],e=function(t){return""!==t||"Вы не указали время публикации"};return t.push(e),t},newOptionRules:function(){var t=[],e=function(t){return t.length>0||"Укажите значение варианта ответа"};return t.push(e),t},computedPublishDateFormatted:function(){return this.formatDate(this.newTest.publishDate)}},watch:{"test.publishDateNF":function(t){this.test.publishDate=this.formatDate(this.test.publishDateNF)}},methods:{fileUpdateHandler:function(t){this.test.filePath=t},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,".").concat(s,".").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("."),a=Object(xt["a"])(e,3),n=a[0],s=a[1],i=a[2];return"".concat(i,"-").concat(s.padStart(2,"0"),"-").concat(n.padStart(2,"0"))},newTest:function(t,e,a){this.isEditable=!1,this.test.clear(),this.$refs.fileField.clear(),this.test.quizId=t,this.startDate=new Date(this.parseDate(e)),this.endDate=new Date(this.parseDate(a))},editTest:function(t,e,a){var n=this;this.isEditable=!0,this.test.clear(),this.$refs.fileField.clear(),this.test.id=t.id,this.test.question=t.question;var s=t.publishDate.split(" "),i=Object(xt["a"])(s,2),r=i[0],o=i[1];this.test.publishDate=r,this.test.publishTime=o,this.test.publishDateNF=this.parseDate(r),this.test.quizId=t.quizId,t.options.forEach(function(t){n.test.options.push(t)}),this.startDate=new Date(this.parseDate(e)),this.endDate=new Date(this.parseDate(a))},addOption:function(){if(this.$refs.newOptionForm.validate()){var t=this.lastId+1,e={id:t,value:this.newOption.value,isAnswer:!1};this.test.options.push(e),this.lastId=t,this.newOption.value=""}},removeOption:function(t){var e=this.test.options.findIndex(function(e){return e.id===t});this.test.options.splice(e,1)},changeAnswer:function(t,e){if(e){var a=this.test.options.find(function(e){return!0===e.isAnswer&&e.id!==t});a&&(a.isAnswer=!1)}},error:function(t){if(t.response){var e=t.response.data,a="";e.forEach(function(t){a+=t+"\n"}),this.$emit("error",a)}else console.log(t),this.$emit("error","Что-то пошло не так...")},uploadFile:function(t){var e=new FormData;e.append("file",this.test.filePath);var a=v.testsFiles.replace("testId",t);return f.a.post(a,e,{headers:{"Content-Type":"multipart/form-data"}})},save:function(){var t=this;if(this.$refs.testForm.validate())if(this.checkIfAnswerExists()){this.isLoading=!0;var e=v.tests;this.isEditable?(e+="/"+this.test.id,f.a.put(e,this.test).then(function(e){var a=e.data;""!==t.test.filePath?t.uploadFile(a.id).then(function(){t.$emit("updated",a)}).catch(function(e){t.error(e)}).finally(function(){t.isLoading=!1}):t.$emit("updated",a)}).catch(function(e){t.error(e)}).finally(function(){t.isLoading=!1})):f.a.post(e,this.test).then(function(e){var a=e.data;""!==t.test.filePath?(console.log(t.test.filePath),t.uploadFile(a.id).then(function(){t.$emit("created",a)}).catch(function(e){t.error(e)}).finally(function(){t.isLoading=!1})):t.$emit("created",a)}).catch(function(e){t.error(e)}).finally(function(){t.isLoading=!1})}else this.$emit("error","Вы не указали правильный ответ")},checkIfAnswerExists:function(){var t=this.test.options.find(function(t){return!0===t.isAnswer});return!!t}}},be=me,ge=a("c964"),De=Object(b["a"])(be,re,oe,!1,null,null,null),_e=De.exports;D()(De,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:ot["a"],VContainer:R["a"],VDatePicker:Vt["a"],VDivider:w["a"],VFlex:X["a"],VForm:lt["a"],VIcon:k["a"],VLayout:U["a"],VList:V["a"],VMenu:yt["a"],VSpacer:S["a"],VSubheader:F["a"],VTextField:ut["a"],VTimePicker:ge["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n\t\t\tПодтвердите действия\n\t\t")]),a("v-card-text",[a("p",[t._v("Вы действительно хотите безвосратно удалить тест "),a("strong",[t._v('"'+t._s(t.question)+'"')]),t._v("?")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Отмена")]),a("v-btn",{attrs:{color:"primary",flat:"",loading:t.loading,disabled:t.loading},on:{click:t.removeTest},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[t._v("\n\t\t\t\tУдалить\n\t\t\t")])],1)],1)},we=[],ke={name:"DeleteTest",data:function(){return{question:"",testId:0,quizId:0,loading:!1}},methods:{deleteTest:function(t){this.question=t.question,this.testId=t.id,this.quizId=t.quizId},removeTest:function(){var t=this,e=v.test.replace("testId",this.testId);this.loading=!0,f.a.delete(e).then(function(){t.$emit("deleted",t.testId,t.quizId)}).catch(function(e){if(e.response){var a=e.response.data,n="";a.forEach(function(t){n+=t+"\n"}),t.$emit("error",n)}else t.$emit("error","Что-то пошло не так...")}).finally(function(){t.loading=!1})}}},Ve=ke,ye=Object(b["a"])(Ve,xe,we,!1,null,null,null),Te=ye.exports;D()(ye,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:ot["a"],VIcon:k["a"],VSpacer:S["a"]});var Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n\t\t\tПодтвердите действие\n\t\t")]),a("v-card-text",[a("p",[t._v("Вы действительно хотите безвозвратно удалить викторину "),a("strong",[t._v(t._s(t.startDate))]),t._v(" - "),a("strong",[t._v(t._s(t.endDate))]),t._v("? Так же станут недоступны рейтинги по этой викторине.")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.removeQuiz},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[t._v("\n\t\t\t\tУдалить\n\t\t\t")])],1)],1)},ze=[],$e={name:"DeleteQuiz",data:function(){return{quizId:0,startDate:"",endDate:"",loading:!1}},methods:{prepare:function(t){this.quizId=t.id,this.startDate=t.startDate,this.endDate=t.endDate},removeQuiz:function(){var t=this,e=v.quizzes.replace("quizId",this.quizId);this.loading=!0,f.a.delete(e).then(function(){t.$emit("deleted",t.quizId)}).catch(function(e){if(e.response){var a=e.response.data,n="";a.forEach(function(t){n+=t+"\n"}),t.$emit("error",n)}else t.$emit("error","Что-то пошло не так...")}).finally(function(){t.loading=!1})}}},Se=$e,Fe=Object(b["a"])(Se,Ce,ze,!1,null,null,null),Le=Fe.exports;D()(Fe,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VCardTitle:ot["a"],VIcon:k["a"],VSpacer:S["a"]});a("e40d");var qe={name:"QuizzesList",props:["name"],title:function(){return"Викторины - ".concat(this.name)},data:function(){return{quizzes:[],hasError:!1,errorMessage:"",isLoading:!1,testDialog:!1,deleteDialog:!1,deleteQuizDialog:!1,snackbar:!1,snackColor:"info",snackText:""}},components:{Quiz:ie,NewEditTest:_e,Loading:Rt.a,DeleteTest:Te,DeleteQuiz:Le},methods:{openNewTestDialog:function(t){this.$refs.newEditTests.newTest(t.id,t.startDate,t.endDate),this.testDialog=!0},openDeleteTestDialog:function(t){this.$refs.deleteTest.deleteTest(t),this.deleteDialog=!0},openEditTestDialog:function(t,e){this.$refs.newEditTests.editTest(t,e.startDate,e.endDate),this.testDialog=!0},openDeleteQuizDialog:function(t){this.$refs.deleteQuiz.prepare(t),this.deleteQuizDialog=!0},getQuizzes:function(){var t=this;this.quizzes=[];var e=v.channelQuizzes.replace("channelName",this.name);f.a.get(e).then(function(e){var a=e.data;a.forEach(function(e){t.quizzes.push(e)})}).catch(function(e){t.hasError=!0,e.response?e.response.data.erorrs.forEach(function(e){t.errorMessage+=e}):t.errorMessage="Что-то пошло не так..."}).finally(function(){t.isLoading=!1})},showError:function(t){this.snackColor="error",this.snackText=t,this.snackbar=!0},success:function(t){this.snackColor="success",this.snackText=t,this.snackbar=!0},testCreatedHandler:function(t){var e=this.quizzes.find(function(e){return e.id===t.quizId});e.tests.push(t),this.success("Тест добавлен!"),this.testDialog=!1},testUpdatedHandler:function(t){var e=this.quizzes.find(function(e){return e.id===t.quizId}),a=e.tests.find(function(e){return e.id===t.id});a.question=t.question,a.publishDate=t.publishDate,a.options=[],t.options.forEach(function(t){a.options.push(t)}),a.file=t.file,this.success("Тест обновлён!"),this.testDialog=!1},testErrorHandler:function(t){this.showError(t)},testDeletedHandler:function(t,e){var a=this.quizzes.find(function(t){return t.id===e}),n=a.tests.findIndex(function(e){return e.id===t});a.tests.splice(n,1),this.deleteDialog=!1,this.success("Тест удалён!")},quizDeletedHandler:function(t){var e=this.quizzes.findIndex(function(e){return e.id===t});this.quizzes.splice(e,1),this.deleteQuizDialog=!1,this.success("Викторина удалена!")}},mounted:function(){this.getQuizzes()},watch:{$route:function(){this.getQuizzes()}}},Ee=qe,Me=a("169a"),Ie=a("0789"),Ae=Object(b["a"])(Ee,Qt,jt,!1,null,null,null),Ne=Ae.exports;D()(Ae,{VBtn:st["a"],VContainer:R["a"],VDialog:Me["a"],VFabTransition:Ie["b"],VFlex:X["a"],VIcon:k["a"],VLayout:U["a"],VSnackbar:ct["a"]});var Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"",dense:"",cad:""}},[a("v-toolbar-title",{staticClass:"subheading"},[t._v("Настройки")]),a("v-spacer")],1),a("v-divider"),a("v-card-text",[a("v-form",{ref:"form"},[a("v-text-field",{attrs:{label:"Очки за правильный ответ",rules:t.rightAnswerPointsRules},model:{value:t.rightAnswerPoints,callback:function(e){t.rightAnswerPoints=e},expression:"rightAnswerPoints"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary",ripple:"",loading:t.loading,disabled:t.loading},on:{click:t.setSettings},scopedSlots:t._u([{key:"loader",fn:function(){return[a("span",{staticClass:"custom-loader"},[a("v-icon",{attrs:{light:""}},[t._v("cached")])],1)]},proxy:!0}])},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                        Сохранить\n                        ")],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{color:"success"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        Настройки сохранены\n    ")])],1)},Qe=[],je={title:"Настройки",name:"Settings",data:function(){return{rightAnswerPoints:0,snackbar:!1,loading:!1}},methods:{getSettings:function(){var t=this,e=v.settings;f.a.get(e).then(function(e){var a=e.data;t.rightAnswerPoints=a.rightAnswerPoints})},setSettings:function(){var t=this;if(this.$refs.form.validate()){this.loading=!0;var e={rightAnswerPoints:this.rightAnswerPoints},a=v.settings;f.a.post(a,e).then(function(){t.snackbar=!0}).finally(function(){t.loading=!1})}}},computed:{rightAnswerPointsRules:function(){var t=[],e=function(t){return""!==t||"Укажите количество баллов за правильный ответ"},a=function(t){return!isNaN(t)||"Количество баллов должно быть числом"},n=function(t){if(""!==t&&!isNaN(t))return+t>0||"Количество баллов должно быть больше нуля"};return t.push(e),t.push(a),t.push(n),t}},created:function(){this.getSettings()}},Pe=je,Re=Object(b["a"])(Pe,Oe,Qe,!1,null,"5488bec0",null),Ue=Re.exports;D()(Re,{VBtn:st["a"],VCard:it["a"],VCardActions:rt["a"],VCardText:rt["b"],VContainer:R["a"],VDivider:w["a"],VFlex:X["a"],VForm:lt["a"],VIcon:k["a"],VLayout:U["a"],VSnackbar:ct["a"],VSpacer:S["a"],VTextField:ut["a"],VToolbar:L["a"],VToolbarTitle:q["b"]}),n["a"].use(N["a"]);var Be=new N["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:H},{path:"/channel/:name",component:Z,props:!0,children:[{path:"quizzes",name:"channelQuizzes",component:Ne,props:!0},{path:"quizzes/new",name:"newQuiz",component:Ot,props:!0},{path:"users",name:"channelUsers",component:gt,props:!0},{path:"user/:userId",name:"channelUser",component:Ct,props:!0},{path:"rating",name:"channelRating",component:qt,props:!0}]},{path:"/channels/new",name:"newChannel",component:vt},{path:"/settings",name:"settings",component:Ue}]});function He(t){var e=t.$options.title;if(e)return"function"===typeof e?e.call(t):e}var Ge={created:function(){var t=He(this);t&&(document.title=t+" | QuestionBot")}};n["a"].config.productionTip=!1,n["a"].mixin(Ge),new n["a"]({router:Be,render:function(t){return t(A)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("6879"),s=a.n(n);s.a},6879:function(t,e,a){},"6fbf":function(t,e,a){"use strict";var n=a("1ce4"),s=a.n(n);s.a},a004:function(t,e,a){},e576:function(t,e,a){"use strict";var n=a("a004"),s=a.n(n);s.a}});
//# sourceMappingURL=app.ed200393.js.map